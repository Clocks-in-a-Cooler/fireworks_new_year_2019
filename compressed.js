window.onresize=()=>{document.location.reload(!0)};var canvas=document.querySelector("canvas"),ctxt=canvas.getContext("2d"),width=window.innerWidth,height=window.innerHeight;function random_number(b,c){var d=Math.min(b,c),f=Math.abs(b-c);return Math.floor(Math.random()*f+d)}function random_element(b){return b[random_number(0,b.length)]}var last_time=null,lapse=0;function animate(b){lapse=null==last_time?0:b-last_time,last_time=b,last_time>next_time&&(entities.push(new Firework_rocket),next_time=last_time+random_number(100,200)),draw_frame(lapse),requestAnimationFrame(animate)}function draw_frame(b){ctxt.fillStyle=get_colour(background_colour,0.1),ctxt.fillRect(0,0,window.innerWidth,window.innerHeight),entities=entities.filter(c=>{return c.active}),entities.forEach(c=>{c.get_new_position(b),c.draw(ctxt)})}function init(){canvas.width=window.innerWidth,canvas.height=window.innerHeight,calculate(window.innerHeight),animate()}function calculate(b){bottom_limit=0.85*b,top_limit=0.15*b}var gravity=5e-3,explode=0.5,thrust=-0.05,friction=0.025,bottom_limit,top_limit,entities=[],fire_delay=random_number(750,1250),next_time=0,background_colour={r:0,g:0,b:0},firework_colours=[{r:255,g:192,b:203},{r:220,g:20,b:60},{r:255,g:69,b:0},{r:255,g:165,b:0},{r:255,g:255,b:0},{r:255,g:215,b:0},{r:124,g:252,b:0},{r:152,g:251,b:152},{r:0,g:206,b:209},{r:176,g:224,b:230},{r:221,g:160,b:221},{r:216,g:191,b:216},{r:255,g:255,b:255},{r:255,g:248,b:220},{r:220,g:220,b:220},{r:192,g:192,b:192}];function get_colour(b,c){return void 0==c?"rgb("+b.r+", "+b.g+", "+b.b+")":"rgba("+b.r+", "+b.g+", "+b.b+", "+c+")"}function Firework_rocket(){this.x=random_number(0,width),this.y=window.innerHeight,this.r=3,this.a=-Math.PI/2,this.active=!0,this.max_height=random_number(bottom_limit,top_limit),this.colour=random_element(firework_colours),this.v={x:0,y:0},this.get_new_position=b=>{this.y<this.max_height?(this.active=!1,this.explode()):(this.v.x+=this.get_friction().x,this.v.y+=this.get_friction().y,this.v.x+=this.get_thrust().x,this.v.y+=this.get_thrust().y,this.x+=this.v.x*b,this.y+=this.v.y*b)},this.get_friction=()=>{return{x:-this.v.x*friction,y:-this.v.y*friction}},this.get_thrust=()=>{return{x:0,y:thrust}},this.draw=b=>{b.beginPath(),b.fillStyle=get_colour(this.colour),b.arc(this.x,this.y,this.r,0,2*Math.PI),b.fill(),b.closePath()},this.explode=()=>{entities.push(new Firework_particle(this.x,this.y,0,this.colour)),entities.push(new Firework_particle(this.x,this.y,Math.PI/4,this.colour)),entities.push(new Firework_particle(this.x,this.y,Math.PI/2,this.colour)),entities.push(new Firework_particle(this.x,this.y,3*Math.PI/4,this.colour)),entities.push(new Firework_particle(this.x,this.y,Math.PI,this.colour)),entities.push(new Firework_particle(this.x,this.y,5*Math.PI/4,this.colour)),entities.push(new Firework_particle(this.x,this.y,3*Math.PI/2,this.colour)),entities.push(new Firework_particle(this.x,this.y,7*Math.PI/4,this.colour))}}function Firework_particle(b,c,d,f){this.x=b,this.y=c,this.r=2,this.v={x:Math.cos(d),y:Math.sin(d)},this.colour=f,this.max_lifetime=500,this.lifetime=0,this.active=!0,this.get_new_position=g=>{this.lifetime>this.max_lifetime?this.active=!1:this.lifetime+=g,this.v.y+=gravity*g,this.x+=this.v.x*g,this.y+=this.v.y*g},this.draw=g=>{g.fillStyle=get_colour(this.colour),g.beginPath(),g.arc(this.x,this.y,this.r,0,2*Math.PI),g.fill(),g.closePath()}}